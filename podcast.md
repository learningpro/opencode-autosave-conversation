# 《代码夜话》播客稿 - opencode-autosave-conversation

## 第 42 期：给 AI 对话装个"行车记录仪"

---

**【开场白 | 0:00 - 0:30】**

嘿，各位代码界的夜猫子们，欢迎回到《代码夜话》！我是你们的老朋友 Orange。

今天咱们聊点刺激的——你有没有过这种经历：凌晨三点，你跟 AI 助手聊得热火朝天，它刚帮你写完一段绝世好代码，结果你手一抖，浏览器崩了，对话记录？没了。代码？飞了。你？裂开了。

别慌，今天介绍的这个小工具，就是来拯救你脆弱小心脏的。

---

**【项目介绍 | 0:30 - 2:00】**

这个项目叫 **opencode-autosave-conversation**，名字虽然长得像高铁站名，但功能简单粗暴——给你的 OpenCode 对话装个"行车记录仪"。

它能干嘛呢？简单说就是：**你跟 AI 聊的每一句话，它都默默帮你记下来，存成漂漂亮亮的 Markdown 文件**。

你可能会说："这有什么稀奇的，我 Ctrl+A、Ctrl+C 也行啊！"

兄弟，你格局小了。

这玩意儿是**全自动**的！你只管跟 AI 吹水，它在后台悄悄干活，连呼吸声都没有。就像你家扫地机器人，你葛优躺着刷手机，它在角落里默默吸尘。唯一的区别是，这个不会撞猫。

---

**【核心功能解析 | 2:00 - 4:30】**

来，我们盘点一下它的几个核心功能：

### 1. 自动创建文件

当你开始一段新对话，它就自动在项目目录下创建一个 `conversations` 文件夹，然后按照 `YYYYMMDD-HH-MM-SS-话题.md` 的格式给文件命名。

比如你凌晨两点半问 AI "怎么修复这个该死的 bug"，它就会生成一个：
```
20260129-02-30-45-怎么修复这个该死的bug.md
```

简直就是电子版的"案发现场记录"。

### 2. 静默自动保存

这个功能我要给满分。它采用 2 秒空闲检测机制——当你停止输入 2 秒后，它就偷偷保存一次。

注意，是**静默**保存，不会弹窗打扰你，不会在控制台刷屏。就像一个专业的速记员，你说话它记录，全程零存在感。

### 3. 图片独立存储

如果你在对话中发送了截图，它不会把 base64 编码那一坨"乱码艺术"塞进 Markdown 里。而是把图片单独存到 `conversations/images/` 目录下，Markdown 里只留一个优雅的引用链接。

强迫症狂喜。

### 4. 完整的工具调用记录

AI 助手用了什么工具，读了哪个文件，输入是什么，输出是什么——全部记录在案。

这意味着什么？意味着你以后可以回溯 AI 的"思考过程"。就像看侦探片一样："原来它是这样一步步找到答案的！"

### 5. 子会话内联

如果你的 AI 助手有"分身术"（也就是调用了子代理/subagent），这些子会话的内容也会被记录在主文件里的 "Child Sessions" 章节。

一个文件看全貌，不用满世界找碎片。

---

**【安装使用 | 4:30 - 6:00】**

好了好了，说了这么多，到底怎么用呢？

**第一步：安装**

```bash
npm install opencode-autosave-conversation
```

一行命令，搞定。比泡面还快。

**第二步：配置**

打开你的 `opencode.json` 文件，加上这么一行：

```json
{
  "plugin": ["opencode-autosave-conversation"]
}
```

完事儿。

没有第三步了。

是的，你没听错，**安装完就能用**，不需要任何额外配置。零配置启动，开箱即用，这才是现代软件该有的样子！

---

**【使用场景 | 6:00 - 7:30】**

有人可能会问："我真的需要保存对话记录吗？"

让我给你描绘几个场景：

**场景一：甩锅现场**

产品经理："这功能不是我要的啊！"
你："来，让我们看看 1 月 15 日的对话记录，第 47 行，你原话是……"
产品经理："……我先去接个电话。"

**场景二：知识沉淀**

三个月后，你遇到一个似曾相识的问题。与其重新问一遍 AI，不如直接搜索你的对话记录库。毕竟，AI 回答过一次的问题，你何必让它再说一遍呢？省 token 啊兄弟！

**场景三：学习复盘**

你想学习 AI 是怎么解决某类问题的？翻开历史记录，研究它的"思路"，比看教程生动多了。这是真正的"AI 教学"。

**场景四：团队协作**

把对话记录提交到 Git 仓库，同事就能看到你是怎么跟 AI 协作完成某个功能的。这不比什么"需求文档"香多了？

---

**【技术亮点 | 7:30 - 8:30】**

最后，作为技术博客，我们来稍微深入一下。

这个插件用 TypeScript 写的，代码架构很清晰：

- `index.ts` - 插件入口，注册各种钩子
- `session-tracker.ts` - 会话追踪器，管理会话生命周期
- `file-manager.ts` - 文件管理器，负责读写文件
- `formatter.ts` - 格式化器，把对话数据转成漂亮的 Markdown

它利用了 OpenCode 的插件系统，监听会话创建、消息更新、会话删除等事件，然后在合适的时机触发保存逻辑。

整个设计遵循"最小侵入"原则——你感知不到它的存在，但它确实在工作。

这就是好软件的特征：**润物细无声**。

---

**【结尾 | 8:30 - 9:00】**

好了，今天的《代码夜话》就到这里。

总结一下：**opencode-autosave-conversation** 是一个 OpenCode 的自动对话保存插件，装上它，你跟 AI 的每一次"深夜长谈"都会被完整记录下来。

再也不用担心对话丢失，再也不用手动复制粘贴。解放双手，专注思考。

这个项目开源在 GitHub 上，地址是：
**github.com/learningpro/opencode-autosave-conversation**

去给它点个 Star 吧，毕竟，一个愿意帮你"记笔记"的工具，值得你的认可。

我是 Orange，我们下期见！

---

**【片尾彩蛋 | 9:00 - 9:15】**

对了，有人问这个项目名为什么这么长？

因为起名的时候 AI 建议的，而这段对话……当然也被自动保存下来了。

*（笑声）*

---

> 播客时长：约 9 分钟
> 
> 背景音乐建议：Lo-fi beats / 赛博朋克风电子乐
> 
> 音效建议：开场可加键盘敲击声，讲到"静默保存"时可加轻柔的存档音效
